import{v as Be,a4 as ae,a5 as Ee,bM as ce,A as H,b0 as Me,b1 as ge,aC as me,G as re,b4 as pe,cd as _e,_ as fe,b6 as Ae,k as Ne,y as Ve,ce as Oe}from"./page-activity-ActivityDetail-346b11b6.js";import{U as oe,P as be,r as m,$ as ne,O as G,K as se,E as ie,ax as le,V as q,m as $,Z as p,p as s,M as u,Y as g,ac as M,al as he,ai as U,ar as Q,as as we,am as ue,aP as ye,t as _,T as Se,F as Y,ao as ke,ap as Ie,o as C,an as Re,aJ as Te,aQ as Ce,ag as Z}from"./common.modules-219f1756.js";import{L as xe}from"./page-home-other-ea059356.js";import{d as Ue,V as qe,P as W,v as z,S as Pe,E as Le,b as Ge,c as ve}from"./page-login-index.vue_vue_type_script_setup_true_lang.ts-453cbe12.js";window.getBuildInfo=function(){return{buildTime:"3/15/2025, 9:01:28 PM",branch:" commitId:c8ca98fce6fc864cab311715d288030620d0dc9f"}};const He=w=>(ke("data-v-e26f70e7"),w=w(),Ie(),w),je=["onKeydown"],Je={class:"tip"},Ke={key:0,class:"red"},Ze={key:1,class:"red"},ze={class:"register__container-tip"},Qe=He(()=>s("div",{class:"tipbg"},null,-1)),Ye={class:"register__container-tips"},We={class:"register__container-invitation"},Xe={class:"register__container-invitation__label"},et={class:"register__container-invitation__input"},tt=["placeholder","disabled"],st={class:"register__container-remember"},at={class:"register__container-button"},rt={class:"account"},ot={class:"loginin"},nt=oe({__name:"Register",props:{registerData:{type:Object,required:!0}},setup(w,{expose:N}){const k=w,{t:e}=be(),c=Be(),o=ae(),n=m(!1),t=m({number:"",numberType:o.rPwdForm.numberType,smsvcode:"",password:"",rePassword:"",invitecode:"",registerType:"mobile"}),I=m("register");t.value.number="",sessionStorage.getItem("register_a")&&(t.value=JSON.parse(sessionStorage.getItem("register_a")||""),sessionStorage.setItem("register_a",""));const R=ne(),T=m(!1),i=m(!1),f=G(()=>{var r,a,h;return!!((r=R.currentRoute.value.query)!=null&&r.invitationCode||(h=(a=R.currentRoute.value.query)==null?void 0:a.r_code)!=null&&h.toString()||sessionStorage.getItem("invitecode"))}),y=G(()=>k.registerData.isInvitecode=="1"?e("plsEnterInvitationCode"):e("notNecessary")),P=c.isOpenRegisterPhoneFirstZeroSwitch;se(()=>t.value.number,r=>{o.setCountDown(0)},{flush:"post"}),se(()=>o.rPwdForm.numberType,r=>{!t.value.numberType&&(t.value.numberType=r)},{flush:"post"});function B(){R.push({name:"login"})}const A=async()=>{if(!ce(t.value.numberType,t.value.number.trim().length))return o.setCountDown(0),_({message:e("wrongTel"),wordBreak:"break-word"});await H(Me({phone:t.value.numberType.replace("+","")+t.value.number,codeType:ge.Registr}))?Se(e("sendSuccess")):setTimeout(()=>{o.setCountDown(0)},500)},V=G(()=>{var F;let r=e("regTip2").match(/\d+/);""+t.value.numberType;const a=(F=c.getAreaPhoneLenList.find(v=>(v==null?void 0:v.area)=="+"+t.value.numberType))==null?void 0:F.len;let h=9;return(a==null?void 0:a.indexOf("-"))!=-1?h=a==null?void 0:a.toString().split("-")[0]:h=a,r?r[0].substr(0,h):""}),O=r=>{const a=r.target;a.value=a.value.replace(/[\s\n\t\r]/g,"")},S=async()=>{if(!ce(t.value.numberType,t.value.number.trim().length))return _({message:e("wrongTel"),wordBreak:"break-word"});if(t.value.number.charAt(0)==="0"&&c.isOpenRegisterPhoneFirstZeroSwitch)return _({message:e("registerNumberTip"),wordBreak:"break-word"});if(k.registerData.registerMobileState!=="1")return _({message:e("registerClose"),wordBreak:"break-word"});if(!t.value.number.trim()||T.value){T.value=!0;return}if(k.registerData.isOpenRegisterSMS!=="0")if(t.value.smsvcode.trim()){if(t.value.smsvcode.trim().length!=6)return _({message:e("verifyCode6Digits"),wordBreak:"break-word"})}else return _({message:e("registerTip1"),wordBreak:"break-word"});if(!t.value.password.trim())return _({message:e("registerTip2"),wordBreak:"break-word"});if(!z.passReg3.test(t.value.password)){n.value=!0;return}if(!t.value.rePassword.trim())return _({message:e("registerTip3"),wordBreak:"break-word"});if(t.value.rePassword!==t.value.password){i.value=!0;return}else i.value=!1;if(!o.userForm.termAndPolicy)return _({message:e("registerDesc1"),wordBreak:"break-word"});k.registerData.hasRegisterCaptcha==="1"?b():x("")},j=r=>{t.value.numberType=r},J=r=>{t.value.number=r},K=()=>{Ce("toPath","ResetPassword"),R.push({name:"About-AboutDetail"})},l=m(),d=m(""),{setLoading:D}=Ee(),x=async r=>{Y(async()=>{D(!0),l.value.startRequestVerify();const{number:a,numberType:h,smsvcode:F,password:v,invitecode:L}=t.value;let X={username:h.replace("+","")+a,smsvcode:F,registerType:t.value.registerType,pwd:v,invitecode:L,domainurl:window.location.hostname,phonetype:me(),captchaId:d.value,track:r,deviceId:localStorage.getItem("arvId")||""};o.register(X).then(async E=>{var de;if(E){D(!1);const De=re(),{token:ee,tokenHeader:Fe}=E==null?void 0:E.data;De.setToken(ee),localStorage.setItem("tokenHeader",Fe),localStorage.setItem("numberType",o.getUserForm.numberType),localStorage.setItem("number",o.userForm.number),R.replace("/"),await o.getUserInfo({signature:ee});const te=await o.getUserInfo({signature:ee}),{onTriggerRegister:$e}=_e();$e((de=te==null?void 0:te.data)==null?void 0:de.userId)}}).catch(E=>{}).finally(()=>{var E;D(!1),(E=l.value)==null||E.setShowHiden(!1)})})},b=async()=>{Y(async()=>{l.value.startRequestGenerate();const r=await H(pe());r?(d.value=r.data.captchaId,l.value.endRequestGenerate(r.data.backgroundImage,r.data.sliderImage)):l.value.endRequestGenerate(null,null)})};return ie(()=>{var a,h;o.setCountDown(0);const r=((a=R.currentRoute.value.query.invitationCode)==null?void 0:a.toString())||((h=R.currentRoute.value.query.r_code)==null?void 0:h.toString())||sessionStorage.getItem("invitecode")||"";r&&(t.value.invitecode=r,sessionStorage.setItem("invitecode",r)),o.getIp()}),le((r,a)=>{r.name=="About-AboutDetail"?sessionStorage.setItem("register_a",JSON.stringify(t.value)):sessionStorage.setItem("register_a","")}),N({showPhoneValidate:T}),(r,a)=>{const h=q("svg-icon"),F=q("van-checkbox");return C(),$("div",{class:"register__container",onKeydown:ye(S,["enter"])},[p(Ue,{"show-validate":T.value,"onUpdate:showValidate":a[0]||(a[0]=v=>T.value=v),number:t.value.number,"onUpdate:number":a[1]||(a[1]=v=>t.value.number=v),"number-type":t.value.numberType,type:I.value,onChangeT:j,onChangeN:J,typeP:"register"},null,8,["show-validate","number","number-type","type"]),s("div",Je,[u(P)?(C(),$("span",Ke,g(u(e)("regTip1")),1)):M("v-if",!0),u(P)?(C(),$("p",Ze,g(V.value),1)):M("v-if",!0)]),r.registerData.isOpenRegisterSMS!=="0"?(C(),he(qe,{key:0,value:t.value.smsvcode,"onUpdate:value":a[2]||(a[2]=v=>t.value.smsvcode=v),sendFunc:A,number:t.value.number,numberType:t.value.numberType},null,8,["value","number","numberType"])):M("v-if",!0),p(W,{value:t.value.password,"onUpdate:value":a[3]||(a[3]=v=>t.value.password=v),label:u(e)("setPsw")},null,8,["value","label"]),U(s("div",ze,[Qe,s("span",null,g(u(e)("pswRule")),1)],512),[[Q,n.value]]),p(W,{value:t.value.rePassword,"onUpdate:value":a[4]||(a[4]=v=>t.value.rePassword=v),label:u(e)("comfirmPsw")},null,8,["value","label"]),U(s("div",Ye,[s("span",null,g(u(e)("unmatchedInput")),1)],512),[[Q,i.value]]),s("div",We,[s("div",Xe,[p(h,{name:"invitation"}),s("span",null,g(u(e)("invitationCode")),1)]),s("div",et,[U(s("input",{type:"text","auto-complete":"new-password",autocomplete:"off",name:"userNumber","onUpdate:modelValue":a[5]||(a[5]=v=>t.value.invitecode=v),placeholder:y.value,disabled:f.value,maxlength:"20",onInput:O},null,40,tt),[[we,t.value.invitecode,void 0,{trim:!0}]])])]),s("div",st,[p(F,{modelValue:u(o).userForm.termAndPolicy,"onUpdate:modelValue":a[7]||(a[7]=v=>u(o).userForm.termAndPolicy=v)},{default:ue(()=>[Re(g(u(e)("readNagree"))+" ",1),s("span",{onClick:a[6]||(a[6]=Te(v=>K(),["stop"]))},g(u(e)("desPrivacy")),1)]),_:1},8,["modelValue"])]),s("div",at,[s("button",{onClick:S},g(u(e)("register")),1),s("button",{class:"login",onClick:B},[s("div",rt,g(u(e)("iHaveAcount")),1),s("div",ot,g(u(e)("goLogin")),1)])]),p(Pe,{ref_key:"captchaRef",ref:l,"refresh-color":"#FFFFFF","show-refresh":!0,onFinish:x,onRefresh:b},null,512)],40,je)}}});const it=fe(nt,[["__scopeId","data-v-e26f70e7"],["__file","/usr/local/jenkins-prod/workspace/ar077-india-jalwa/src/components/Login/Register.vue"]]),lt=w=>(ke("data-v-1679e191"),w=w(),Ie(),w),ut=["onKeydown"],dt={class:"register__container-tip"},ct=lt(()=>s("div",{class:"tipbg"},null,-1)),vt={class:"register__container-tips"},gt={class:"register__container-invitation"},mt={class:"register__container-invitation__label"},pt={class:"register__container-invitation__input"},_t=["placeholder","disabled"],ft={class:"register__container-remember"},bt={class:"register__container-button"},ht={class:"account"},wt={class:"loginin"},yt=oe({__name:"EmailRegister",props:{registerData:{type:Object,required:!0}},setup(w,{expose:N}){const k=w,{t:e}=be(),c=m(!1),o=ae(),n=m({smsvcode:"",password:"",rePassword:"",invitecode:"",email:"",registerType:"email"}),t=m("register");sessionStorage.getItem("register")&&(n.value=JSON.parse(sessionStorage.getItem("register")||""),sessionStorage.setItem("register",""));const I=ne(),R=m(!1),T=m(!1),i=G(()=>{var l;return!!((l=I.currentRoute.value.query)!=null&&l.invitationCode)}),f=G(()=>k.registerData.isInvitecode=="1"?e("plsEnterInvitationCode"):e("notNecessary"));se(()=>n.value.email,l=>{o.setCountDown(0)},{flush:"post"});function y(){I.push({name:"login"})}const P=async()=>{if(!z.email1.test(n.value.email))return o.setCountEmailDown(0),_({message:e(ve.email),wordBreak:"break-word"});await H(Ae({email:n.value.email,emailType:ge.Registr}))?Se(e("sendSuccess")):o.setCountEmailDown(0)},B=l=>{const d=l.target;d.value=d.value.replace(/[\s\n\t\r]/g,"")},A=async()=>{if(k.registerData.registerEmailState!=="1")return _({message:e("registerClose"),wordBreak:"break-word"});if(k.registerData.isOpenRegisterEmail!=="0")if(n.value.smsvcode.trim()){if(n.value.smsvcode.trim().length!=6)return _({message:e("verifyCode6Digits"),wordBreak:"break-word"})}else return _({message:e("registerTip6"),wordBreak:"break-word"});if(!z.email1.test(n.value.email))return _({message:e(ve.email),wordBreak:"break-word"});if(!n.value.password.trim())return _({message:e("registerTip2"),wordBreak:"break-word"});if(!z.passReg3.test(n.value.password)){c.value=!0;return}if(!n.value.rePassword.trim())return _({message:e("registerTip3"),wordBreak:"break-word"});if(n.value.rePassword!==n.value.password){T.value=!0;return}else T.value=!1;if(!o.userForm.termAndPolicy)return _({message:e("registerDesc1"),wordBreak:"break-word"});k.registerData.hasRegisterCaptcha==="1"?K():J("")},V=l=>{n.value.email=l},O=()=>{Ce("toPath","ResetPassword"),I.push({name:"About-AboutDetail"})},S=m(),j=m(""),J=async l=>{Y(async()=>{S.value.startRequestVerify();const{smsvcode:d,password:D,invitecode:x}=n.value;let b={username:n.value.email,smsvcode:d,registerType:n.value.registerType,pwd:D,invitecode:x,domainurl:window.location.hostname,phonetype:me(),captchaId:j.value,track:l,deviceId:localStorage.getItem("arvId")||""};o.register(b).then(async r=>{var a;if(r){const h=re(),{token:F,tokenHeader:v}=r==null?void 0:r.data;h.setToken(F),localStorage.setItem("tokenHeader",v),localStorage.setItem("numberType",o.getUserForm.numberType),localStorage.setItem("number",o.userForm.number),I.replace("/");const L=await o.getUserInfo({signature:F}),{onTriggerRegister:X}=_e();X((a=L==null?void 0:L.data)==null?void 0:a.userId)}}).catch(r=>{}).finally(()=>{S.value.setShowHiden(!1)})})},K=async()=>{Y(async()=>{S.value.startRequestGenerate();const l=await H(pe());l?(j.value=l.data.captchaId,S.value.endRequestGenerate(l.data.backgroundImage,l.data.sliderImage)):S.value.endRequestGenerate(null,null)})};return ie(()=>{var d,D;o.setCountEmailDown(0);const l=((d=I.currentRoute.value.query.invitationCode)==null?void 0:d.toString())||((D=I.currentRoute.value.query.r_code)==null?void 0:D.toString())||sessionStorage.getItem("invitecode")||"";l&&(n.value.invitecode=l)}),le((l,d)=>{l.name=="About-AboutDetail"?sessionStorage.setItem("register",JSON.stringify(n.value)):sessionStorage.setItem("register","")}),N({showPhoneValidate:R}),(l,d)=>{const D=q("svg-icon"),x=q("van-checkbox");return C(),$("div",{class:"register__container",onKeydown:ye(A,["enter"])},[p(Le,{ref:"email",type:t.value,email:n.value.email,onChangeN:V},null,8,["type","email"]),l.registerData.isOpenRegisterEmail!=="0"?(C(),he(Ge,{key:0,value:n.value.smsvcode,"onUpdate:value":d[0]||(d[0]=b=>n.value.smsvcode=b),sendFunc:P,email:n.value.email},null,8,["value","email"])):M("v-if",!0),p(W,{value:n.value.password,"onUpdate:value":d[1]||(d[1]=b=>n.value.password=b),label:u(e)("setPsw")},null,8,["value","label"]),U(s("div",dt,[ct,s("span",null,g(u(e)("pswRule")),1)],512),[[Q,c.value]]),p(W,{value:n.value.rePassword,"onUpdate:value":d[2]||(d[2]=b=>n.value.rePassword=b),label:u(e)("comfirmPsw")},null,8,["value","label"]),U(s("div",vt,[s("span",null,g(u(e)("unmatchedInput")),1)],512),[[Q,T.value]]),s("div",gt,[s("div",mt,[p(D,{name:"invitation"}),s("span",null,g(u(e)("invitationCode")),1)]),s("div",pt,[U(s("input",{type:"text","auto-complete":"new-password",autocomplete:"off",name:"userNumber","onUpdate:modelValue":d[3]||(d[3]=b=>n.value.invitecode=b),placeholder:f.value,disabled:i.value,maxlength:"20",onInput:B},null,40,_t),[[we,n.value.invitecode,void 0,{trim:!0}]])])]),s("div",ft,[p(x,{modelValue:u(o).userForm.termAndPolicy,"onUpdate:modelValue":d[5]||(d[5]=b=>u(o).userForm.termAndPolicy=b)},{default:ue(()=>[Re(g(u(e)("readNagree"))+" ",1),s("span",{onClick:d[4]||(d[4]=Te(b=>O(),["stop"]))},g(u(e)("desPrivacy")),1)]),_:1},8,["modelValue"])]),s("div",bt,[s("button",{onClick:A},g(u(e)("register")),1),s("button",{class:"login",onClick:y},[s("div",ht,g(u(e)("iHaveAcount")),1),s("div",wt,g(u(e)("goLogin")),1)])]),p(Pe,{ref_key:"captchaRef",ref:S,"refresh-color":"#FFFFFF","show-refresh":!0,onFinish:J,onRefresh:K},null,512)],40,ut)}}});const St=fe(yt,[["__scopeId","data-v-1679e191"],["__file","/usr/local/jenkins-prod/workspace/ar077-india-jalwa/src/components/Login/EmailRegister.vue"]]),kt={class:"resgister__C"},It={class:"resgister__C-heading"},Rt={class:"resgister__C-heading__title"},Tt={class:"resgister__C-heading__subTitle"},Ct={class:"login_container-tab"},Pt={class:"resgister__C-form"},Et=oe({__name:"index",setup(w){const{openAll:N}=Ne(),k=re(),e=ae();m("");const c=m({isRegisterState:"1",SMSstate:"0",registerStateMsg:"",hasRegisterCaptcha:"0",registerEmailState:"0",registerMobileState:"0",isOpenRegisterSMS:"0",isOpenRegisterEmail:"0",isInvitecode:"0"}),o=m("phone"),n=ne();k.token&&n.push({name:"home"});const t=i=>{o.value=i};le((i,f,y)=>{y(),i.name==="home"&&N()});const I=m();function R(){n.push({name:"home"})}async function T(){var f,y,P,B,A,V,O,S;const i=await H(Oe());i&&(c.value.isRegisterState=i.data.registerState,c.value.registerStateMsg=i.data.registerStateMsg,c.value.registerEmailState=i.data.registerEmailState,c.value.registerMobileState=(f=i.data)==null?void 0:f.registerMobileState,c.value.isOpenRegisterSMS=(y=i.data)==null?void 0:y.isOpenRegisterSMS,c.value.isOpenRegisterEmail=(P=i.data)==null?void 0:P.isOpenRegisterEmail,c.value.hasRegisterCaptcha=i.data.isOpenRegisterCaptcha,c.value.isInvitecode=(B=i.data)==null?void 0:B.isInvitecode,e.setTermAndPolicy(((A=i.data)==null?void 0:A.registerPrivacyChecked)==="1"),Number(i.data.registerEmailState)+Number((V=i.data)==null?void 0:V.registerMobileState)==0?(((O=i.data)==null?void 0:O.isOpenRegisterSMS)!=="1"&&(o.value="email"),n.push({name:"login"})):(c.value.registerSMSState=i.data.registerSMSState,c.value.registerEmailState!=="0"&&((S=i.data)==null?void 0:S.registerMobileState)=="0"&&(o.value="email")))}return T(),ie(async()=>{const{default:i}=await Ve(()=>import("./chunk.fingerprintjs-df345f5a.js"),["assets/js/chunk.fingerprintjs-df345f5a.js","assets/js/common.modules-219f1756.js","assets/css/common-8abe0886.css"]);localStorage.getItem("arvId")||i.load().then(f=>{f.get().then(y=>{localStorage.setItem("arvId",y.visitorId)})}).catch(f=>{console.error("Error generating fingerprint:",f)})}),(i,f)=>{const y=q("NavBar"),P=q("svg-icon");return C(),$("div",kt,[p(y,{onClickLeft:R,leftArrow:!0,headLogo:!0,class:"main"},{right:ue(()=>[p(xe)]),_:1}),s("div",It,[s("h1",Rt,g(i.$t("register")),1),s("div",Tt,[s("span",null,g(i.$t("registerbyphoneoremail")),1)])]),s("div",Ct,[c.value.registerMobileState!="0"?(C(),$("div",{key:0,class:Z(["tab",[o.value=="phone"?"active":""]]),onClick:f[0]||(f[0]=B=>t("phone"))},[p(P,{name:"phone"}),s("div",null,g(i.$t("phoneregister")),1)],2)):M("v-if",!0),c.value.registerEmailState!="0"?(C(),$("div",{key:1,class:Z(["tab",[o.value=="email"?"active":""]]),onClick:f[1]||(f[1]=B=>t("email"))},[p(P,{name:"email"}),s("div",null,g(i.$t("emailregister")),1)],2)):M("v-if",!0)]),s("div",Pt,[c.value.registerMobileState!="0"?(C(),$("div",{key:0,class:Z(["tab-content",[o.value=="phone"?"activecontent":""]])},[p(it,{ref_key:"register",ref:I,registerData:c.value},null,8,["registerData"])],2)):M("v-if",!0),c.value.registerEmailState!="0"?(C(),$("div",{key:1,class:Z(["tab-content",[o.value=="email"?"activecontent":""]])},[p(St,{ref_key:"register",ref:I,registerData:c.value},null,8,["registerData"])],2)):M("v-if",!0)])])}}});export{Et as _};
//# sourceMappingURL=page-register-index.vue_vue_type_script_setup_true_lang.ts-7f0111aa.js.map
