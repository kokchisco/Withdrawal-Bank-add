import{U as M,r as v,P as Y,$ as J,K as A,aI as Z,E as q,R as H,ax as W,V as E,o as h,m as y,Z as d,M as i,ai as I,ar as $,p as r,Y as p,am as j,an as G,aJ as Q,t as c,T as D,ao as X,ap as ee,ag as T,ac as F}from"./common.modules-219f1756.js";import{L as ne}from"./page-home-other-ea059356.js";import{a4 as V,G as B,A as x,b0 as le,b1 as se,b2 as ae,c1 as te,_ as oe,bo as ie,b6 as ue,L as de}from"./page-activity-ActivityDetail-346b11b6.js";import{d as me,P as N,V as ce,v as R,E as pe,b as ve,c as K}from"./page-login-index.vue_vue_type_script_setup_true_lang.ts-453cbe12.js";window.getBuildInfo=function(){return{buildTime:"3/15/2025, 9:01:28 PM",branch:" commitId:c8ca98fce6fc864cab311715d288030620d0dc9f"}};const we=w=>(X("data-v-e7fb7c52"),w=w(),ee(),w),ge={class:"register__container"},_e={class:"register__container-tip"},be=we(()=>r("div",{class:"tipbg"},null,-1)),fe={class:"register__container-tips"},he={class:"register__container-remember"},ye={class:"register__container-button"},Se=M({__name:"ResetPassword",setup(w,{expose:S}){const C=v("reset"),{t:n}=Y(),s=V(),l=J(),g=v(!1),k=B(),b=v(!1),m=v(!1),e=v({numberType:s.userForm.numberType,number:"",password:"",rePassword:"",smsvcode:""});sessionStorage.getItem("rpwd")&&(e.value=JSON.parse(sessionStorage.getItem("rpwd")||""),sessionStorage.setItem("rpwd","")),A(()=>s.rPwdForm.numberType,t=>{!e.value.numberType&&(e.value.numberType=t)},{flush:"post"});const a=async()=>{const t=(e.value.number.trim()+e.value.numberType).length;if(t<10||t>14)return s.setCountDown(0),c({message:n("wrongTel"),wordBreak:"break-word"});await x(le({phone:e.value.numberType+e.value.number,codeType:se.resetPassword}))?D(n("sendSuccess")):setTimeout(()=>{s.setCountDown(0)},500)};async function _(){const t=(e.value.number.trim()+e.value.numberType).length;if(t<10||t>14)return c({message:n("wrongTel"),wordBreak:"break-word"});if(!e.value.number.trim()||g.value){g.value=!0;return}if(s.isOpenForgetPasswordSMSState)if(e.value.smsvcode.trim()){if(e.value.smsvcode.trim().length!=6)return c({message:n("verifyCode6Digits"),wordBreak:"break-word"})}else return c({message:n("registerTip1"),wordBreak:"break-word"});if(!e.value.password.trim())return c({message:n("registerTip2"),wordBreak:"break-word"});if(!R.passReg3.test(e.value.password)){m.value=!0;return}if(!e.value.rePassword.trim())return c({message:n("registerTip3"),wordBreak:"break-word"});if(e.value.password!==e.value.rePassword){b.value=!0;return}else b.value=!1;if(!s.userForm.termAndPolicy)return c({message:n("registerDesc1"),wordBreak:"break-word"});const{numberType:o,number:f,password:u,smsvcode:z}=e.value;let re={username:o+f.trim(),password:u,smsvcode:z,type:"mobile"};await x(ae(re))&&(localStorage.getItem("token")&&(await te({}),k.token="",s.userForm.vCode="",s.loginout(),localStorage.setItem("isToLogin","1"),B().setToken("")),l.push("/login"),D(n("rpdsucceed")))}Z(window,"keydown",t=>{t.key=="Enter"&&_()});const P=()=>{l.push({name:"About-AboutDetail"})},L=t=>{e.value.numberType=t},O=t=>{e.value.number=t};q(()=>{s.setCountDown(0)});let U=A(()=>e.value.number,t=>{s.setCountDown(0)},{flush:"post"});return H(()=>{U()}),W((t,o)=>{t.name=="About-AboutDetail"?sessionStorage.setItem("rpwd",JSON.stringify(e.value)):sessionStorage.setItem("rpwd","")}),S({showPhoneValidate:g}),(t,o)=>{const f=E("van-checkbox");return h(),y("div",ge,[d(me,{"show-validate":g.value,"onUpdate:showValidate":o[0]||(o[0]=u=>g.value=u),"number-type":e.value.numberType,number:e.value.number,type:C.value,onChangeT:L,onChangeN:O},null,8,["show-validate","number-type","number","type"]),d(N,{value:e.value.password,"onUpdate:value":o[1]||(o[1]=u=>e.value.password=u),label:i(n)("newPSWRest")},null,8,["value","label"]),I(r("div",_e,[be,r("span",null,p(i(n)("pswRule")),1)],512),[[$,m.value]]),d(N,{value:e.value.rePassword,"onUpdate:value":o[2]||(o[2]=u=>e.value.rePassword=u),label:i(n)("newPSWconfirm")},null,8,["value","label"]),I(r("div",fe,[r("span",null,p(i(n)("unmatchedInput")),1)],512),[[$,b.value]]),d(ce,{value:e.value.smsvcode,"onUpdate:value":o[3]||(o[3]=u=>e.value.smsvcode=u),number:e.value.number,sendFunc:a,numberType:e.value.numberType,loginType:"1"},null,8,["value","number","numberType"]),r("div",he,[d(f,{modelValue:i(s).userForm.termAndPolicy,"onUpdate:modelValue":o[5]||(o[5]=u=>i(s).userForm.termAndPolicy=u)},{default:j(()=>[G(p(i(n)("readNagree"))+" ",1),r("span",{onClick:o[4]||(o[4]=Q(u=>P(),["stop"]))},p(i(n)("desPrivacy")),1)]),_:1},8,["modelValue"])]),r("div",ye,[r("button",{onClick:_},p(i(n)("reset")),1)])])}}});const ke=oe(Se,[["__scopeId","data-v-e7fb7c52"],["__file","/usr/local/jenkins-prod/workspace/ar077-india-jalwa/src/components/Login/ResetPassword.vue"]]),Pe=w=>(X("data-v-470fd154"),w=w(),ee(),w),Te={class:"register__container"},Ce={class:"register__container-tip"},Ie=Pe(()=>r("div",{class:"tipbg"},null,-1)),$e={class:"register__container-tips"},Be={class:"register__container-remember"},Fe={class:"register__container-button"},Re=M({__name:"ResetEmailPassword",setup(w,{expose:S}){const{registerState:C}=ie();C();const n=v("reset"),{t:s}=Y(),l=V(),g=B(),k=J(),b=v(!1),m=v(!1),e=v(!1),a=v({numberType:l.userForm.numberType,number:"",email:"",password:"",rePassword:"",smsvcode:""});sessionStorage.getItem("rpwd")&&(a.value=JSON.parse(sessionStorage.getItem("rpwd")||""),sessionStorage.setItem("rpwd","")),A(()=>l.rPwdForm.numberType,t=>{!a.value.numberType&&(a.value.numberType=t)},{flush:"post"});const _=async()=>{if(!R.email1.test(a.value.email))return l.setCountEmailDown(0),c({message:s(K.email),wordBreak:"break-word"});await x(ue({email:a.value.email,emailType:se.resetPassword}))?D(s("sendSuccess")):setTimeout(()=>{l.setCountEmailDown(0)},500)};async function P(){if(!R.email1.test(a.value.email))return c({message:s(K.email),wordBreak:"break-word"});if(l.isOpenForgetPasswordEmailState)if(a.value.smsvcode.trim()){if(a.value.smsvcode.trim().length!=6)return c({message:s("verifyCode6Digits"),wordBreak:"break-word"})}else return c({message:s("registerTip6"),wordBreak:"break-word"});if(!a.value.password.trim())return c({message:s("registerTip2"),wordBreak:"break-word"});if(!R.passReg3.test(a.value.password)){e.value=!0;return}if(!a.value.rePassword.trim())return c({message:s("registerTip3"),wordBreak:"break-word"});if(a.value.password!==a.value.rePassword){m.value=!0;return}else m.value=!1;if(!l.userForm.termAndPolicy)return c({message:s("registerDesc1"),wordBreak:"break-word"});const{email:t,password:o,smsvcode:f}=a.value;let u={username:t.trim(),password:o,type:"email",smsvcode:f};await x(ae(u))&&(localStorage.getItem("token")&&(await te({}),g.token="",l.userForm.vCode="",l.loginout(),localStorage.setItem("isToLogin","1"),B().setToken("")),k.push("/login"),D(s("rpdsucceed")))}Z(window,"keydown",t=>{t.key=="Enter"&&P()});const L=()=>{k.push({name:"About-AboutDetail"})},O=t=>{a.value.email=t};q(()=>{l.setCountEmailDown(0)});let U=A(()=>a.value.email,t=>{l.setCountEmailDown(0)},{flush:"post"});return H(()=>{U()}),W((t,o)=>{t.name=="About-AboutDetail"?sessionStorage.setItem("rpwd",JSON.stringify(a.value)):sessionStorage.setItem("rpwd","")}),S({showPhoneValidate:b}),(t,o)=>{const f=E("van-checkbox");return h(),y("div",Te,[d(pe,{ref:"email",type:n.value,email:a.value.email,onChangeN:O},null,8,["type","email"]),d(N,{value:a.value.password,"onUpdate:value":o[0]||(o[0]=u=>a.value.password=u),label:i(s)("newPSWRest")},null,8,["value","label"]),I(r("div",Ce,[Ie,r("span",null,p(i(s)("pswRule")),1)],512),[[$,e.value]]),d(N,{value:a.value.rePassword,"onUpdate:value":o[1]||(o[1]=u=>a.value.rePassword=u),label:i(s)("newPSWconfirm")},null,8,["value","label"]),I(r("div",$e,[r("span",null,p(i(s)("unmatchedInput")),1)],512),[[$,m.value]]),d(ve,{value:a.value.smsvcode,"onUpdate:value":o[2]||(o[2]=u=>a.value.smsvcode=u),sendFunc:_,email:a.value.email},null,8,["value","email"]),r("div",Be,[d(f,{modelValue:i(l).userForm.termAndPolicy,"onUpdate:modelValue":o[4]||(o[4]=u=>i(l).userForm.termAndPolicy=u)},{default:j(()=>[G(p(i(s)("readNagree"))+" ",1),r("span",{onClick:o[3]||(o[3]=Q(u=>L(),["stop"]))},p(i(s)("desPrivacy")),1)]),_:1},8,["modelValue"])]),r("div",Fe,[r("button",{onClick:P},p(i(s)("reset")),1)])])}}});const Ae=oe(Re,[["__scopeId","data-v-470fd154"],["__file","/usr/local/jenkins-prod/workspace/ar077-india-jalwa/src/components/Login/ResetEmailPassword.vue"]]),Ee={class:"rpwd__C"},De={class:"rpwd__C-heading"},Ve={class:"rpwd__C-heading__title"},xe={class:"rpwd__C-heading__subTitle"},Ne={class:"login_container-tab"},Le={class:"rpwd__C-form"},je=M({__name:"index",setup(w){const{t:S}=de.global,C=B(),n=V();n.getRegisterState();const s=J(),l=v("phone");n.isOpenForgetPasswordSMSState||(l.value="email");const g=v(!0);function k(){s.go(-1)}const b=m=>{l.value=m};return C.token&&(g.value=!1),W((m,e,a)=>{m.name!=="About-AboutDetail"&&V().clearRpwdData(),a()}),(m,e)=>{const a=E("NavBar"),_=E("svg-icon");return h(),y("div",Ee,[d(a,{onClickLeft:k,leftArrow:!0,headLogo:!0,class:"main"},{right:j(()=>[d(ne)]),_:1}),r("div",De,[r("h1",Ve,p(i(S)("forgetPSW")),1),r("div",xe,[r("div",null,p(m.$t("changepasswordphoneoremail")),1)])]),r("div",Ne,[i(n).isOpenForgetPasswordSMSState?(h(),y("div",{key:0,class:T(["tab",[l.value=="phone"?"active":""]]),onClick:e[0]||(e[0]=P=>b("phone"))},[d(_,{name:"phone"}),r("div",{class:T([l.value=="phone"?"phonefont30active":""])},p(m.$t("changepasswordphone")),3)],2)):F("v-if",!0),i(n).isOpenForgetPasswordEmailState?(h(),y("div",{key:1,class:T(["tab",[l.value=="email"?"active":""]]),onClick:e[1]||(e[1]=P=>b("email"))},[r("div",null,[d(_,{name:"email"}),G(),I(d(_,{name:"user"},null,512),[[$,i(n).isOpenExternalAccount]])]),r("div",{class:T([l.value=="email"?"emailfont30active":""])},p(m.$t("changepasswordemail")),3)],2)):F("v-if",!0)]),r("div",Le,[i(n).isOpenForgetPasswordSMSState?(h(),y("div",{key:0,class:T(["tab-content",[l.value=="phone"?"activecontent":""]])},[d(ke)],2)):F("v-if",!0),i(n).isOpenForgetPasswordEmailState?(h(),y("div",{key:1,class:T(["tab-content",[l.value=="email"?"activecontent":""]])},[d(Ae)],2)):F("v-if",!0)])])}}});export{je as _};
//# sourceMappingURL=page-rpwd-index.vue_vue_type_script_setup_true_lang.ts-c39ef912.js.map